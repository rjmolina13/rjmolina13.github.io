<!DOCTYPE html>
<html lang="en">
<head>
    <script>
        (function () {
            const key = 'qw_theme';
            const stored = localStorage.getItem(key) || 'auto';
            const sys = matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
            const eff = stored === 'auto' ? sys : stored;

            const d = document.documentElement;
            d.dataset.theme = eff;                 // if you use [data-theme="dark"] in CSS
            d.classList.remove('theme-light','theme-dark');
            d.classList.add(eff === 'dark' ? 'theme-dark' : 'theme-light');
        })();
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home - QuizWhiz</title>
    <link rel="icon" type="image/svg+xml" href="../favicon.svg">
    <link rel="alternate icon" href="../favicon.svg">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- CSS Files -->
    <link rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" href="../css/footer.css">
    
    <!-- Supabase SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
    <div class="app-container">
        
        <!-- Navigation Header Container -->
        <div id="navbar-container"></div>

        <!-- Main Content -->
        <main class="main-content">
            <section id="home" class="content-section active">
                <div class="hero-section">
                    <div class="hero-content">
                        <h2>Welcome to Quiz Whiz!</h2>
                        <p>Your ultimate online reviewer for mastering knowledge through flashcards and quizzes.</p>
                        <div class="stats-grid">
                            <div class="stat-card clickable" data-action="navigate" data-target="flashcards">
                                <i class="fas fa-layer-group"></i>
                                <h3 id="total-flashcards">0</h3>
                                <p>Flashcards</p>
                            </div>
                            <div class="stat-card clickable" data-action="navigate" data-target="quiz">
                                <i class="fas fa-question-circle"></i>
                                <h3 id="total-quizzes">0</h3>
                                <p>Quizzes</p>
                            </div>
                            <div class="stat-card clickable" data-action="modal" data-target="best-score-modal">
                                <i class="fas fa-trophy"></i>
                                <h3 id="quiz-score">0%</h3>
                                <p>Best Score</p>
                            </div>
                            <div class="stat-card clickable" data-action="modal" data-target="study-streak-modal">
                                <i class="fas fa-fire"></i>
                                <h3 id="study-streak">0</h3>
                                <p>Study Streak</p>
                            </div>
                        </div>
                        <div class="quick-actions">
                            <a href="flashcards.html" class="btn btn-primary">
                                <i class="fas fa-play"></i> Start Studying
                            </a>
                            <a href="content.html" class="btn btn-secondary">
                                <i class="fas fa-plus"></i> Add Content
                            </a>
                        </div>
                    </div>
                </div>
            </section>
        </main>
        
        <!-- Footer Container -->
        <div id="footer-container"></div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loading-overlay">
        <div class="loading-spinner">
            <i class="fas fa-brain fa-spin"></i>
            <p>Loading...</p>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div class="toast-container" id="toast-container"></div>

    <!-- Best Score Modal -->
    <div class="modal stats-modal" id="best-score-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-trophy"></i> Best Score Breakdown</h2>
                <span class="close" onclick="app.uiManager?.closeModal('best-score-modal')">&times;</span>
            </div>
            <div class="modal-body">
                <div class="stats-breakdown" id="best-score-breakdown">
                    <!-- Content will be populated by JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <!-- Study Streak Modal -->
    <div class="modal stats-modal" id="study-streak-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-fire"></i> Study Streak Details</h2>
                <span class="close" onclick="app.uiManager?.closeModal('study-streak-modal')">&times;</span>
            </div>
            <div class="modal-body">
                <div class="stats-breakdown" id="study-streak-breakdown">
                    <!-- Content will be populated by JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <!-- Supabase Configuration -->
    <script src="../js/supabase-config.js"></script>
    <script src="../js/supabase-auth.js"></script>
    <script src="../js/supabase-data.js"></script>

    <!-- New Modules -->
    <script src="../js/theme-manager.js"></script>
    <script src="../js/data-sync.js"></script>
    <script src="../js/auth-guard.js"></script>
    
    <!-- JavaScript Modules -->
    <script src="../js/debug-config.js"></script>
    <script src="../js/auth-manager.js"></script>
    <script src="../js/navbar-loader.js"></script>
    <script src="../js/footer-loader.js"></script>
    <script src="../js/unified-data-manager.js"></script>
    <script src="../js/custom-dropdown.js"></script>
    <script src="../js/flashcard-manager.js"></script>
    <script src="../js/quiz-manager.js"></script>
    <script src="../js/mixed-manager.js"></script>
    <script src="../js/content-manager.js"></script>
    <script src="../js/ui-manager.js"></script>
    <script src="../js/event-handler.js"></script>
    <script src="../js/router.js"></script>
    <script src="../js/main.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            console.info('Home page initialization started');
            
            if (typeof window.app === 'undefined') {
                window.app = new QuizWhizApp();
            }
            if (typeof app === 'undefined') {
                app = window.app;
            }
            
            // Initialize the app (this calls initializeTheme)
            window.app.init();
            
            if (typeof Router !== 'undefined') {
                app.router = new Router(app);
            }
            if (app.uiManager) {
                app.uiManager.showSection('home');
            }
            
            console.info('Home page initialization completed');
        });
    </script>
</body>
</html>